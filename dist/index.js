!function(t,o){for(var e in o)t[e]=o[e]}(exports,function(t){function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}var e={};return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},o.p="",o(o.s=0)}([function(t,o,e){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r,i=e(1);!function(t){t[t.NotLoaded=0]="NotLoaded",t[t.Loading=1]="Loading",t[t.Loaded=2]="Loaded",t[t.LoadError=3]="LoadError"}(r=o.LoadState||(o.LoadState={})),o.DefaultOptions={rootSelector:".js-load",requestTimeout:2e4,notLoadedClass:"js-load--not-loaded",loadingClass:"js-load--loading",loadedClass:"js-load--loaded",loadErrorClass:"js-load--error",errorSelector:".js-load__error",loadStateChangedEvent:"load-state-changed",instantLoadTimeout:300,urlAttr:"data-load",plainTextAttr:"data-load-plain-text",plainText:!1,contentSelector:".js-load__content",loader:function(t,o,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.timeout=e.options.requestTimeout||2e4,n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(200!==n.status?o(new Error(n.statusText),null):o(null,n.responseText))},n.send()}};var s=function(t){function o(o,e){var n=t.call(this,o,e)||this;if(n._state=r.NotLoaded,n._plainText=!1,!n.options.urlAttr)throw new Error("urlAttr option is empty");return n._plainText=i.checkBinaryOptionAttr(n.root,n.options.plainTextAttr,n.options.plainText||!1),n._syncClasses(),n}return n(o,t),Object.defineProperty(o.prototype,"plainText",{get:function(){return this._plainText},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"loadState",{get:function(){return this._state},enumerable:!0,configurable:!0}),o.prototype.load=function(){var t=this;if(!this.options.loader)throw new Error("Cannot load content: loader option is empty");this.url?(null!=this.options.instantLoadTimeout&&this.options.instantLoadTimeout>0?setTimeout(function(){t._state===r.NotLoaded&&t._setState(r.Loading)},0):this._setState(r.Loading),this.options.loader(this.url,function(o,e){o?t._setError(o):t.options.applier?t.options.applier(t,e,function(o){o?t._setError(o):t._setState(r.Loaded)}):(t.applyContent(e||""),t._setState(r.Loaded))},this)):this._setState(r.Loaded)},Object.defineProperty(o.prototype,"url",{get:function(){return this.options.urlAttr?this.root.getAttribute(this.options.urlAttr)||null:null},set:function(t){this.options.urlAttr&&(t?this.root.setAttribute(this.options.urlAttr,t||""):this.root.removeAttribute(this.options.urlAttr))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"contentElement",{get:function(){if(this.options.contentSelector){var t=this.root.querySelector(this.options.contentSelector);if(t)return t}return this.root},enumerable:!0,configurable:!0}),o.prototype.applyContent=function(t){this._plainText?this.contentElement.textContent=t:this.contentElement.innerHTML=t},o.prototype._setState=function(t){this._state=t,this._syncClasses(),this.options.loadStateChangedEvent&&this.root.dispatchEvent(new CustomEvent(this.options.loadStateChangedEvent,{bubbles:!0,cancelable:!1,detail:{newState:this._state}}))},o.prototype._syncClasses=function(){this.root.classList.toggle(this.options.notLoadedClass||"",this._state===r.NotLoaded),this.root.classList.toggle(this.options.loadedClass||"",this._state===r.Loaded),this.root.classList.toggle(this.options.loadingClass||"",this._state===r.Loading),this.root.classList.toggle(this.options.loadErrorClass||"",this._state===r.LoadError)},o.prototype._setError=function(t){if(this._setState(r.LoadError),this.options.errorSelector)for(var o=this.root.querySelectorAll(this.options.errorSelector),e=0;e<o.length;++e)o[e].textContent=t.message},o}(i.Component);o.Loader=s,o.LoaderFactory=new i.ComponentFactory("loader",o.DefaultOptions,s)},function(t,o){!function(t,o){for(var e in o)t[e]=o[e]}(o,function(t){function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}var e={};return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},o.p="",o(o.s=0)}([function(t,o,e){"use strict";function n(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];if(Object.assign)return(p=Object.assign).call.apply(p,[this,t].concat(o));if(void 0===t||null===t)throw new TypeError("assign: Cannot convert first argument to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var s=Object.keys(Object(i)),a=0,u=s.length;a<u;a++){var l=s[a],c=Object.getOwnPropertyDescriptor(i,l);void 0!==c&&c.enumerable&&(n[l]=i[l])}}return n;var p}Object.defineProperty(o,"__esModule",{value:!0}),o.checkBinaryOptionAttr=function(t,o,e){return o&&t.hasAttribute(o)?"false"!==t.getAttribute(o).toLowerCase():!!e};var r=function(){function t(t,o){this._root=t,this._options=o}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),t}();o.Component=r;var i=function(){function t(t,o,e){this._compName=t,this._defOptions=o,this._defComponent=e}return t.prototype.init=function(t,o){return this.initByFunc(this.ctorToCreator(o),t)},t.prototype.initByFunc=function(t,o){for(var e=o&&o.rootSelector?o.rootSelector:this._defOptions.rootSelector,n=document.querySelectorAll(e),r=0;r<n.length;++r)this.createCompByFunc(t,n[r],o)},t.prototype.createComp=function(t,o,e){return this.createCompByFunc(this.ctorToCreator(t),o,e)},t.prototype.createCompByFunc=function(o,e,r){r=n({},this._defOptions,r);var i=null;return this._defComponent&&(i=t.fromRoot(this._compName,e)),i||(i=o(e,r),t.setComponent(this._compName,e,i)),i},t.prototype.ctorToCreator=function(t){if(!t&&!this._defComponent)throw new Error("Cannot create component: given type is empty");var o=t||this._defComponent;return function(t,e){return new o(t,e)}},t.prototype.fromRoot=function(o){return t.fromRoot(this._compName,o)},t.fromRoot=function(t,o){return o["__hidden_comp_"+t]||null},t.setComponent=function(t,o,e){o["__hidden_comp_"+t]=e},t}();o.ComponentFactory=i,o.assign=n}]))}]));